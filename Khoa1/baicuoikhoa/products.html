<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Danh s√°ch s·∫£n ph·∫©m - MyShop Dropship</title>
  <link rel="stylesheet" href="products.css">
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="container">
      <a href="#" class="logo">
        <img src="logo.png" alt="Logo">
        <span>MyShop Dropship</span>
      </a>
      <a href="checkout.html" class="checkout-btn">‚û° B√°n l·∫°i s·∫£n ph·∫©m</a>
      <div class="dropdown">
        <button class="dropdown-btn">‚â° Danh m·ª•c</button>
        <div class="dropdown-content">
          <a href="#" data-category="all">T·∫•t c·∫£</a>
          <a href="#" data-category="technology">C√¥ng ngh·ªá</a>
          <a href="#" data-category="fashion">Th·ªùi trang</a>
          <a href="#" data-category="cosmetics">M·ªπ ph·∫©m</a>
          <a href="#" data-category="khac">Kh√°c</a>
        </div>
      </div>
      <div class="search-box">
        <input type="text" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." id="search-input">
        <button id="search-btn">üîç</button>
      </div>
      <a href="#top" class="scroll-top">‚¨Ü</a>
      <a href="cart.html" class="cart-icon">üõç <span id="cart-count">0</span></a>
    </div>
  </nav>

  <!-- Danh s√°ch s·∫£n ph·∫©m -->
  <div class="parent">

    <!-- Nh√≥m C√¥ng ngh·ªá (1‚Äì8) -->
    <div class="category technology">
      <div class="item-card">
        <img src="https://hdradio.vn/upload/hinhanh/loa-di-dong/divoom/ditoopro/ditoopro-avt.jpg" alt="Loa Divoom DitooPro">
        <h3>Loa Divoom DitooPro</h3>
        <p class="price">300.000ƒë</p>
        <a href="product-detail.html?id=1" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://imagedelivery.net/ZeGtsGSjuQe1P3UP_zk3fQ/d21c2f61-af72-4cc4-972b-e5a073db9c00/storedata" alt="Elgato Stream Deck Neo">
        <h3>Elgato Stream Deck Neo</h3>
        <p class="price">450.000ƒë</p>
        <a href="product-detail.html?id=2" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://imagedelivery.net/ZeGtsGSjuQe1P3UP_zk3fQ/3dd303f9-1bdf-47b9-7e17-c01658b9a800/storedata" alt="Elgato Gaming Stream Deck XL">
        <h3>Elgato Gaming Stream Deck XL</h3>
        <p class="price">500.000ƒë</p>
        <a href="product-detail.html?id=3" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://anphat.com.vn/media/product/33286_gia_do_man_hinh_north_bayou_17_3.png" alt="Gi√° ƒë·ª° m√†n h√¨nh North Bayou F80">
        <h3>Gi√° ƒë·ª° m√†n h√¨nh North Bayou F80</h3>
        <p class="price">250.000ƒë</p>
        <a href="product-detail.html?id=4" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://salt.tikicdn.com/cache/750x750/ts/product/5e/ba/07/9a769c0db6544b5b62c3be3104c1a829.jpg.webp" alt="Tai nghe Lobel TWS F9-5">
        <h3>Tai nghe Lobel TWS F9-5</h3>
        <p class="price">300.000ƒë</p>
        <a href="product-detail.html?id=5" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://cdn2.cellphones.com.vn/insecure/rs:fill:0:358/q:90/plain/https://cellphones.com.vn/media/catalog/product/f/r/frame_516_5__1.png" alt="B√†n ph√≠m c∆° AULA F3261">
        <h3>B√†n ph√≠m c∆° AULA F3261</h3>
        <p class="price">450.000ƒë</p>
        <a href="product-detail.html?id=6" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://bizweb.dktcdn.net/thumb/grande/100/534/572/products/screenshot-2024-12-18-114608.png?v=1755598260167" alt="Chu·ªôt Mchose G3 Wireless">
        <h3>Chu·ªôt Mchose G3 Wireless</h3>
        <p class="price">500.000ƒë</p>
        <a href="product-detail.html?id=7" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://vietminh.vn/uploads/files/man-hp-v193b(1).jpg" alt="M√†n h√¨nh HP V193B">
        <h3>M√†n h√¨nh HP V193B</h3>
        <p class="price">250.000ƒë</p>
        <a href="product-detail.html?id=8" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
    </div>

    <!-- Nh√≥m M·ªπ ph·∫©m (9‚Äì16) -->
    <div class="category cosmetics">
      <div class="item-card">
        <img src="https://media.comem.vn/uploads/September2023/son-nha-sac-mau-thanh-nha-1_sp2x.webp" alt="Son Nh√£ - S·∫Øc M√†u Thanh Nh√£">
        <h3>Son Nh√£ - S·∫Øc M√†u Thanh Nh√£</h3>
        <p class="price">330.000ƒë</p>
        <a href="product-detail.html?id=9" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://vilip.vn/wp-content/uploads/2023/09/Son-YSL-Rouge-Pur-Couture-01-Le-Rouge-%E2%80%93-Mau-Do-Tuoi-dd.jpg?v=1694339097" alt="Son YSL Rouge Pur Couture">
        <h3>Son YSL Rouge Pur Couture</h3>
        <p class="price">890.000ƒë</p>
        <a href="product-detail.html?id=10" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://cdn.vuahanghieu.com/unsafe/0x500/left/top/smart/filters:quality(90)/https://admin.vuahanghieu.com/upload/product/2025/07/phan-nuoc-yves-saint-laurent-beaute-touche-eclat-glow-pact-cushion-foundation-tone-b10-688836df227fb-29072025095007.jpg" alt="Ph·∫•n N∆∞·ªõc YSL Glow-Pact B10">
        <h3>Ph·∫•n N∆∞·ªõc YSL Glow-Pact B10</h3>
        <p class="price">2.500.000ƒë</p>
        <a href="product-detail.html?id=11" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://is4.fwrdassets.com/images/p/fw/45/CTIL-WU151_V1.jpg" alt="Charlotte Tilbury Gian L√¥ng M√†y">
        <h3>Charlotte Tilbury Gian L√¥ng M√†y</h3>
        <p class="price">686.660ƒë</p>
        <a href="product-detail.html?id=12" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://phukientrangdiem.com/thumb.php?src=https://phukientrangdiem.com/upload/public/cop-trang-diem/cop-dung-do-trang-diem-xach-tay-guong-den-led-mau-den-khung-nhom-phukientrangdiem.com-4.1.jpg&w=500&h=0&f=products&s=1" alt="C·ªëp ƒê·ª±ng Trang ƒêi·ªÉm LED">
        <h3>C·ªëp ƒê·ª±ng Trang ƒêi·ªÉm LED</h3>
        <p class="price">1.850.000ƒë</p>
        <a href="product-detail.html?id=13" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://pos.nvncdn.com/688d2d-180276/ps/20240814_eXAj2aRqx3.jpeg?v=1723647728" alt="B·ªô M·ªπ Ph·∫©m H·ªìng 5in1">
        <h3>B·ªô M·ªπ Ho√†ng Cung Ph·∫©m H·ªìng 5in1</h3>
        <p class="price">450.000ƒë</p>
        <a href="product-detail.html?id=14" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://i.ebayimg.com/images/g/lzQAAOSwLcFjIEQ1/s-l1600.webp" alt="C·ªëp ƒê·ª±ng M·ªπ Ph·∫©m V√¢n N·ªïi">
        <h3>C·ªëp ƒê·ª±ng M·ªπ Ph·∫©m V√¢n N·ªïi</h3>
        <p class="price">690.000ƒë</p>
        <a href="product-detail.html?id=15" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://down-vn.img.susercontent.com/file/vn-11134207-7r98o-lvyfnpdrhejda9@resize_w900_nl.webp" alt="Kem D∆∞·ª°ng ·∫®m Ban ƒê√™m OLAY">
        <h3>Kem D∆∞·ª°ng ·∫®m Ban ƒê√™m OLAY</h3>
        <p class="price">816.000ƒë</p>
        <a href="product-detail.html?id=16" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
    </div>

    <!-- Nh√≥m Th·ªùi trang (17‚Äì24) -->
    <div class="category fashion">
      <div class="item-card">
        <img src="https://thoitrangbigsize.vn/wp-content/uploads/2021/10/BSX653D0.jpg" alt="">
        <h3>√Åo thun xanh navy BSX653</h3>
        <p class="price">289.000ƒë</p>
        <a href="product-detail.html?id=17" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://thoitrangbigsize.vn/wp-content/uploads/2025/04/Den-9.jpg" alt="">
        <h3>Qu·∫ßn Short Kaki Nam M-8XL</h3>
        <p class="price">380.000ƒë</p>
        <a href="product-detail.html?id=18" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://nhatminhsports.vn/wp-content/uploads/2025/03/Tui-Deo-Vai-Shoulder-Pouch-UN767-White-01.jpg" alt="">
        <h3>T√∫i ƒêeo Vai UN767</h3>
        <p class="price">2.394.000ƒë</p>
        <a href="product-detail.html?id=19" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://bizweb.dktcdn.net/thumb/1024x1024/100/449/458/products/anh-ghep-logo-web-7-22b8e5b3-9199-4fb3-8959-9a731199c56b.png" alt="">
        <h3>Gi√†y Tommy Hilfiger Tr·∫Øng</h3>
        <p class="price">2.995.000ƒë</p>
        <a href="product-detail.html?id=20" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://down-vn.img.susercontent.com/file/sg-11134201-7rau8-ma9fc0o8vstub1@resize_w900_nl.webp" alt="">
        <h3>V√°y Hoa Ti·ªác Tr√† N·ªØ</h3>
        <p class="price">631.398ƒë</p>
        <a href="product-detail.html?id=21" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://swavi.vn/wp-content/swift-ai/images/wp-content/uploads/2024/01/Day-Chuyen-Swarovski-Chinh-Hang-Dancing-Swan-necklace-Swan-Blue-Rhodium-plated-01-jpg.webp" alt="">
        <h3>D√¢y Chuy·ªÅn Swarovski Swan</h3>
        <p class="price">4.190.000ƒë</p>
        <a href="product-detail.html?id=22" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://nhatminhsports.vn/wp-content/uploads/2025/04/Taylor-Made-Metal-Eyelit-Hat-2024-Model-Adjustable-White.webp" alt="">
        <h3>M≈© TaylorMade Newport</h3>
        <p class="price">900.000ƒë</p>
        <a href="product-detail.html?id=23" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
      <div class="item-card">
        <img src="https://bizweb.dktcdn.net/thumb/grande/100/059/374/products/anhdaidien-web-1500x1500.jpg?v=1656078752770" alt="">
        <h3>Th·∫Øt L∆∞ng MIB35-2M01</h3>
        <p class="price">780.000ƒë</p>
        <a href="product-detail.html?id=24" class="buy-btn">Xem chi ti·∫øt</a>
      </div>
    </div>

    <!-- Nh√≥m S·∫£n ph·∫©m B√°n L·∫°i (Resell) - Render ƒë·ªông t·ª´ localStorage -->
<div class="category khac" id="resell-category">  <!-- S·ª¨A: ƒê·ªïi t·ª´ "resell" th√†nh "khac" -->
  <!-- S·∫£n ph·∫©m resell s·∫Ω ƒë∆∞·ª£c render b·∫±ng JS ·ªü ƒë√¢y -->
</div>

  </div>

  <script>
  // --- L·ªåC DANH M·ª§C V√Ä T√åM KI·∫æM (C·∫¨P NH·∫¨T CH·ªêNG L·∫∂P) ---
const categoryLinks = document.querySelectorAll('.dropdown-content a');  // L·∫•y t·∫•t c·∫£ c√°c li√™n k·∫øt trong dropdown danh m·ª•c
const categories = document.querySelectorAll('.category');  // L·∫•y t·∫•t c·∫£ c√°c ph·∫ßn t·ª≠ danh m·ª•c tr√™n trang
const searchInput = document.getElementById('search-input');  // L·∫•y ph·∫ßn t·ª≠ input t√¨m ki·∫øm
const searchButton = document.getElementById('search-btn');  // L·∫•y ph·∫ßn t·ª≠ n√∫t t√¨m ki·∫øm
const parentContainer = document.querySelector('.parent');  // L·∫•y ph·∫ßn t·ª≠ cha ch·ª©a c√°c danh m·ª•c v√† s·∫£n ph·∫©m

let searchResultsContainer = null;  // Bi·∫øn l∆∞u tr·ªØ container t·∫°m th·ªùi cho k·∫øt qu·∫£ t√¨m ki·∫øm, ban ƒë·∫ßu l√† null
let originalItems = [];  // M·∫£ng l∆∞u tr·ªØ c√°c item s·∫£n ph·∫©m g·ªëc ƒë·ªÉ s·ª≠ d·ª•ng trong l·ªçc, tr√°nh l·∫∑p l·∫°i
let isFiltering = false;  // C·ªù (flag) ƒë·ªÉ ngƒÉn ch·∫∑n vi·ªác g·ªçi h√†m l·ªçc nhi·ªÅu l·∫ßn c√πng l√∫c

function filterProducts() {  // H√†m ch√≠nh ƒë·ªÉ l·ªçc s·∫£n ph·∫©m d·ª±a tr√™n t·ª´ kh√≥a t√¨m ki·∫øm v√† danh m·ª•c
  // Ch·ªëng double-call: N·∫øu ƒëang filter, b·ªè qua
  if (isFiltering) return;  // Ki·ªÉm tra c·ªù, n·∫øu ƒëang l·ªçc th√¨ tho√°t h√†m ƒë·ªÉ tr√°nh l·ªói
  isFiltering = true;  // ƒê·∫∑t c·ªù th√†nh true ƒë·ªÉ ƒë√°nh d·∫•u ƒëang th·ª±c hi·ªán l·ªçc

  const term = searchInput.value.toLowerCase().trim();  // L·∫•y gi√° tr·ªã t·ª´ input t√¨m ki·∫øm, chuy·ªÉn th√†nh ch·ªØ th∆∞·ªùng v√† lo·∫°i b·ªè kho·∫£ng tr·∫Øng th·ª´a
  let activeCategory = null;  // Bi·∫øn l∆∞u tr·ªØ danh m·ª•c ƒëang ƒë∆∞·ª£c ch·ªçn

  // X√°c ƒë·ªãnh danh m·ª•c ƒëang ƒë∆∞·ª£c ch·ªçn
  categoryLinks.forEach(link => {  // Duy·ªát qua t·ª´ng li√™n k·∫øt danh m·ª•c
    if (link.classList.contains('active')) {  // Ki·ªÉm tra li√™n k·∫øt n√†o c√≥ class 'active'
      activeCategory = link.dataset.category;  // L∆∞u gi√° tr·ªã dataset.category c·ªßa li√™n k·∫øt ƒë√≥
    }
  });

  // N·∫øu KH√îNG c√≥ t·ª´ kh√≥a t√¨m ki·∫øm: S·ª≠ d·ª•ng l·ªçc category g·ªëc
  if (!term) {  // N·∫øu t·ª´ kh√≥a t√¨m ki·∫øm r·ªóng
    // X√≥a container t√¨m ki·∫øm n·∫øu t·ªìn t·∫°i
    if (searchResultsContainer) {  // Ki·ªÉm tra n·∫øu container k·∫øt qu·∫£ t√¨m ki·∫øm t·ªìn t·∫°i
      searchResultsContainer.remove();  // X√≥a container kh·ªèi DOM
      searchResultsContainer = null;  // ƒê·∫∑t l·∫°i bi·∫øn th√†nh null
      parentContainer.classList.remove('search-active');  // Lo·∫°i b·ªè class ƒë·ªÉ kh√¥i ph·ª•c giao di·ªán ban ƒë·∫ßu
    }

    // Query DOM hi·ªán t·∫°i cho category filter (an to√†n v√¨ kh√¥ng clone)
    const currentItems = document.querySelectorAll('.item-card:not(.search-results .item-card)');  // L·∫•y c√°c item-card g·ªëc, lo·∫°i tr·ª´ c√°c item t·ª´ k·∫øt qu·∫£ t√¨m ki·∫øm c≈©
    categories.forEach(cat => {  // Duy·ªát qua t·ª´ng danh m·ª•c
      if (activeCategory === 'all' || !activeCategory || cat.classList.contains(activeCategory)) {  // Ki·ªÉm tra n·∫øu danh m·ª•c kh·ªõp v·ªõi activeCategory
        cat.classList.remove('hidden');  // Hi·ªÉn th·ªã danh m·ª•c
      } else {
        cat.classList.add('hidden');  // ·∫®n danh m·ª•c
      }
    });

    // Hi·ªÉn th·ªã t·∫•t c·∫£ item g·ªëc (kh√¥ng ·∫©n item n√†o trong category hi·ªán)
    currentItems.forEach(item => {  // Duy·ªát qua t·ª´ng item hi·ªán t·∫°i
      item.classList.remove('hidden');  // Hi·ªÉn th·ªã item
    });
    isFiltering = false;  // ƒê·∫∑t c·ªù v·ªÅ false sau khi ho√†n th√†nh
    return;  // K·∫øt th√∫c h√†m
  }

  // N·∫øu C√ì t·ª´ kh√≥a t√¨m ki·∫øm: T·∫°o k·∫øt qu·∫£ li·ªÅn m·∫°ch (d√πng originalItems ƒë·ªÉ tr√°nh l·∫∑p)
  parentContainer.classList.add('search-active');  // Th√™m class ƒë·ªÉ ·∫©n c√°c danh m·ª•c kh√°c v√† hi·ªÉn th·ªã k·∫øt qu·∫£ t√¨m ki·∫øm
  // X√≥a container c≈© n·∫øu t·ªìn t·∫°i
  if (searchResultsContainer) {  // Ki·ªÉm tra n·∫øu container c≈© t·ªìn t·∫°i
    searchResultsContainer.remove();  // X√≥a container c≈©
  }

  // T·∫°o container m·ªõi cho k·∫øt qu·∫£ t√¨m ki·∫øm
  searchResultsContainer = document.createElement('div');  // T·∫°o ph·∫ßn t·ª≠ div m·ªõi
  searchResultsContainer.classList.add('search-results');  // Th√™m class cho container

  // Thu th·∫≠p v√† clone c√°c item kh·ªõp T·ª™ originalItems (kh√¥ng query DOM)
  let matchingItems = [];  // M·∫£ng l∆∞u tr·ªØ c√°c item kh·ªõp v·ªõi ƒëi·ªÅu ki·ªán
  originalItems.forEach(item => {  // Duy·ªát qua t·ª´ng item g·ªëc
    const name = (item.getAttribute('data-name') || item.querySelector('h3').textContent).toLowerCase();  // L·∫•y t√™n s·∫£n ph·∫©m t·ª´ thu·ªôc t√≠nh ho·∫∑c n·ªôi dung, chuy·ªÉn th√†nh ch·ªØ th∆∞·ªùng
    const categoryDiv = item.closest('.category');  // T√¨m ph·∫ßn t·ª≠ cha l√† danh m·ª•c

    // Ki·ªÉm tra kh·ªõp search V√Ä category (n·∫øu c√≥)
    const matchesSearch = name.includes(term);  // Ki·ªÉm tra n·∫øu t√™n s·∫£n ph·∫©m ch·ª©a t·ª´ kh√≥a t√¨m ki·∫øm
    const matchesCategory = (activeCategory === 'all' || !activeCategory || 
      (categoryDiv && categoryDiv.classList.contains(activeCategory)) || 
      item.getAttribute('data-category') === activeCategory);  // Ki·ªÉm tra n·∫øu item thu·ªôc danh m·ª•c active

    if (matchesSearch && matchesCategory) {  // N·∫øu item kh·ªõp c·∫£ hai ƒëi·ªÅu ki·ªán
      const clonedItem = item.cloneNode(true);  // Clone item ƒë·ªÉ tr√°nh thay ƒë·ªïi g·ªëc
      clonedItem.setAttribute('data-name', name);  // Gi·ªØ thu·ªôc t√≠nh data-name cho item cloned
      matchingItems.push(clonedItem);  // Th√™m item cloned v√†o m·∫£ng
    }
  });

  // Th√™m c√°c item kh·ªõp v√†o container
  matchingItems.forEach(item => {  // Duy·ªát qua m·∫£ng matchingItems
    searchResultsContainer.appendChild(item);  // Th√™m item v√†o container k·∫øt qu·∫£
  });

  // N·∫øu kh√¥ng c√≥ k·∫øt qu·∫£, th√™m th√¥ng b√°o
  if (matchingItems.length === 0) {  // Ki·ªÉm tra n·∫øu m·∫£ng r·ªóng
    const noResult = document.createElement('p');  // T·∫°o ph·∫ßn t·ª≠ p cho th√¥ng b√°o
    noResult.classList.add('no-results');  // Th√™m class cho ph·∫ßn t·ª≠
    noResult.textContent = 'Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o ph√π h·ª£p!';  // Thi·∫øt l·∫≠p n·ªôi dung
    searchResultsContainer.appendChild(noResult);  // Th√™m ph·∫ßn t·ª≠ v√†o container
  } else {
    // Th√™m ti√™u ƒë·ªÅ k·∫øt qu·∫£
    const resultTitle = document.createElement('h2');  // T·∫°o ph·∫ßn t·ª≠ h2 cho ti√™u ƒë·ªÅ
    resultTitle.textContent = `T√¨m th·∫•y ${matchingItems.length} s·∫£n ph·∫©m`;  // Thi·∫øt l·∫≠p n·ªôi dung ti√™u ƒë·ªÅ
    resultTitle.style.textAlign = 'center';  // C√†i ƒë·∫∑t style cho ti√™u ƒë·ªÅ
    resultTitle.style.width = '100%';
    resultTitle.style.marginBottom = '20px';
    resultTitle.style.color = '#333';
    resultTitle.style.fontSize = '24px';
    searchResultsContainer.insertBefore(resultTitle, searchResultsContainer.firstChild);  // Th√™m ti√™u ƒë·ªÅ v√†o ƒë·∫ßu container
  }

  // Th√™m container v√†o parent
  parentContainer.appendChild(searchResultsContainer);  // Th√™m container k·∫øt qu·∫£ v√†o ph·∫ßn t·ª≠ cha

  // Log ƒë·ªÉ debug
  console.log(`T√¨m th·∫•y ${matchingItems.length} s·∫£n ph·∫©m v·ªõi t·ª´ kh√≥a "${term}" (category: ${activeCategory || 'all'}).`);  // Ghi log ƒë·ªÉ ki·ªÉm tra s·ªë l∆∞·ª£ng k·∫øt qu·∫£

  // Reset flag sau 300ms (ƒë·ªìng b·ªô debounce)
  setTimeout(() => { isFiltering = false; }, 300);  // ƒê·∫∑t l·∫°i c·ªù sau 300ms ƒë·ªÉ cho ph√©p l·ªçc ti·∫øp theo
}

// S·ª± ki·ªán click category
categoryLinks.forEach(link => {  // Duy·ªát qua t·ª´ng li√™n k·∫øt danh m·ª•c
  link.addEventListener('click', (e) => {  // Th√™m s·ª± ki·ªán click cho li√™n k·∫øt
    e.preventDefault();  // NgƒÉn ch·∫∑n h√†nh vi m·∫∑c ƒë·ªãnh c·ªßa li√™n k·∫øt
    categoryLinks.forEach(l => l.classList.remove('active'));  // Lo·∫°i b·ªè class 'active' t·ª´ t·∫•t c·∫£ li√™n k·∫øt
    link.classList.add('active');  // Th√™m class 'active' cho li√™n k·∫øt ƒë∆∞·ª£c click
    filterProducts();  // G·ªçi h√†m l·ªçc ƒë·ªÉ √°p d·ª•ng thay ƒë·ªïi
  });
});

// S·ª± ki·ªán t√¨m ki·∫øm (click button)
searchButton.addEventListener('click', (e) => {  // Th√™m s·ª± ki·ªán click cho n√∫t t√¨m ki·∫øm
  e.preventDefault();  // NgƒÉn ch·∫∑n h√†nh vi submit n·∫øu l√† form
  filterProducts();  // G·ªçi h√†m l·ªçc
});

// S·ª± ki·ªán Enter
searchInput.addEventListener('keypress', function(e) {  // Th√™m s·ª± ki·ªán nh·∫•n ph√≠m cho input t√¨m ki·∫øm
  if (e.key === 'Enter') {  // Ki·ªÉm tra n·∫øu ph√≠m Enter ƒë∆∞·ª£c nh·∫•n
    e.preventDefault();  // NgƒÉn ch·∫∑n h√†nh vi m·∫∑c ƒë·ªãnh
    filterProducts();  // G·ªçi h√†m l·ªçc
  }
});

// Debounce cho input search (real-time, ch·ªëng l·∫∑p v·ªõi flag)
let searchTimeout;
searchInput.addEventListener('input', function() {  // Th√™m s·ª± ki·ªán khi gi√° tr·ªã input thay ƒë·ªïi
  clearTimeout(searchTimeout);  // X√≥a timeout tr∆∞·ªõc ƒë√≥
  searchTimeout = setTimeout(() => {  // ƒê·∫∑t timeout m·ªõi
    if (!isFiltering) {  // Ch·ªâ g·ªçi n·∫øu kh√¥ng ƒëang l·ªçc
      filterProducts();  // G·ªçi h√†m l·ªçc
    }
  }, 300);  // Ch·ªù 300ms ƒë·ªÉ tr√°nh g·ªçi h√†m qu√° nhanh (debounce)
});

// ================================
// RENDER S·∫¢N PH·∫®M RESell (GI·ªÆ NGUY√äN)
// ================================
function renderResellProducts() {  // H√†m ƒë·ªÉ render s·∫£n ph·∫©m resell t·ª´ localStorage
  const resellContainer = document.getElementById('resell-category');  // L·∫•y ph·∫ßn t·ª≠ container cho s·∫£n ph·∫©m resell
  const resellList = JSON.parse(localStorage.getItem("resellList")) || [];  // L·∫•y danh s√°ch resell t·ª´ localStorage, n·∫øu kh√¥ng c√≥ th√¨ m·∫£ng r·ªóng
  
  if (resellList.length === 0) {  // Ki·ªÉm tra n·∫øu danh s√°ch r·ªóng
    resellContainer.innerHTML = '<p class="no-resell-message">Ch∆∞a c√≥ s·∫£n ph·∫©m b√°n l·∫°i n√†o. H√£y th√™m t·ª´ trang checkout!</p>';  // Thi·∫øt l·∫≠p n·ªôi dung th√¥ng b√°o
    return;  // K·∫øt th√∫c h√†m
  }

  resellContainer.innerHTML = '';  // X√≥a n·ªôi dung c≈© trong container
  resellList.forEach((product) => {  // Duy·ªát qua t·ª´ng s·∫£n ph·∫©m trong danh s√°ch
    const itemCard = document.createElement('div');  // T·∫°o ph·∫ßn t·ª≠ div m·ªõi cho item
    itemCard.classList.add('item-card');  // Th√™m class cho item
    const resellId = product.id;  // L·∫•y ID c·ªßa s·∫£n ph·∫©m
    itemCard.innerHTML = ` 
      <img src="${product.img || 'https://via.placeholder.com/200x200?text=No+Image'}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/200x200?text=No+Image'">
      <h3>${product.name || 'S·∫£n ph·∫©m kh√¥ng t√™n'}</h3>
      <p class="price">${product.price || '0ƒë'}</p>
      <a href="product-detail.html?id=${resellId}" class="buy-btn">Xem chi ti·∫øt</a>
    `;
    itemCard.setAttribute('data-category', 'khac');  // Thi·∫øt l·∫≠p thu·ªôc t√≠nh cho l·ªçc danh m·ª•c
    itemCard.setAttribute('data-name', (product.name || '').toLowerCase());  // Thi·∫øt l·∫≠p thu·ªôc t√≠nh t√™n s·∫£n ph·∫©m
    resellContainer.appendChild(itemCard);  // Th√™m item v√†o container
  });
}

// Set data attributes cho item-card g·ªëc (GI·ªÆ NGUY√äN)
function setDataAttributes() {  // H√†m ƒë·ªÉ thi·∫øt l·∫≠p thu·ªôc t√≠nh d·ªØ li·ªáu cho c√°c item-card
  const allItems = document.querySelectorAll('.item-card');  // L·∫•y t·∫•t c·∫£ c√°c item-card tr√™n trang
  allItems.forEach(item => {  // Duy·ªát qua t·ª´ng item
    if (!item.getAttribute('data-name')) {  // Ki·ªÉm tra n·∫øu thu·ªôc t√≠nh data-name ch∆∞a t·ªìn t·∫°i
      const name = item.querySelector('h3').textContent.toLowerCase();  // L·∫•y t√™n t·ª´ n·ªôi dung h3 v√† chuy·ªÉn th√†nh ch·ªØ th∆∞·ªùng
      item.setAttribute('data-name', name);  // Thi·∫øt l·∫≠p thu·ªôc t√≠nh data-name
      const parentCat = item.closest('.category');  // T√¨m ph·∫ßn t·ª≠ cha l√† danh m·ª•c
      if (parentCat) {  // N·∫øu t·ªìn t·∫°i ph·∫ßn t·ª≠ cha
        const catClass = Array.from(parentCat.classList).find(cls => cls !== 'category');  // L·∫•y class danh m·ª•c (kh√¥ng ph·∫£i 'category')
        if (catClass) {  // N·∫øu c√≥ class
          item.setAttribute('data-category', catClass);  // Thi·∫øt l·∫≠p thu·ªôc t√≠nh data-category
        }
      }
    }
  });
}

// Scroll Top Button Handler (GI·ªÆ NGUY√äN)
const scrollTopBtn = document.querySelector('.scroll-top');  // L·∫•y ph·∫ßn t·ª≠ n√∫t cu·ªôn l√™n ƒë·∫ßu trang
if (scrollTopBtn) {  // Ki·ªÉm tra n·∫øu n√∫t t·ªìn t·∫°i
  window.addEventListener('scroll', function() {  // Th√™m s·ª± ki·ªán cu·ªôn trang
    if (window.pageYOffset > 300) {  // Ki·ªÉm tra n·∫øu cu·ªôn xu·ªëng h∆°n 300px
      scrollTopBtn.style.display = 'block';  // Hi·ªÉn th·ªã n√∫t
    } else {
      scrollTopBtn.style.display = 'none';  // ·∫®n n√∫t
    }
  });
  scrollTopBtn.addEventListener('click', function(e) {  // Th√™m s·ª± ki·ªán click cho n√∫t
    e.preventDefault();  // NgƒÉn ch·∫∑n h√†nh vi m·∫∑c ƒë·ªãnh
    window.scrollTo({ top: 0, behavior: 'smooth' });  // Cu·ªôn l√™n ƒë·∫ßu trang m∆∞·ª£t m√†
  });
}

// ================================
// X·ª¨ L√ù KHI T·∫¢I TRANG (TH√äM L∆ØU originalItems)
// ================================
document.addEventListener("DOMContentLoaded", () => {  // S·ª± ki·ªán ch·ªù t√†i li·ªáu t·∫£i xong
  renderResellProducts();  // G·ªçi h√†m ƒë·ªÉ render s·∫£n ph·∫©m resell
  setDataAttributes();  // G·ªçi h√†m ƒë·ªÉ thi·∫øt l·∫≠p thu·ªôc t√≠nh cho item-card

  originalItems = Array.from(document.querySelectorAll('.item-card'));  // L∆∞u t·∫•t c·∫£ item-card v√†o m·∫£ng originalItems

  const urlParams = new URLSearchParams(window.location.search);  // L·∫•y tham s·ªë t·ª´ URL
  const categoryFromUrl = urlParams.get('category');  // L·∫•y tham s·ªë category t·ª´ URL
  if (!categoryFromUrl) {  // N·∫øu kh√¥ng c√≥ tham s·ªë category
    categoryLinks.forEach(link => {  // Duy·ªát qua li√™n k·∫øt danh m·ª•c
      if (link.dataset.category === 'all') {  // T√¨m li√™n k·∫øt 'all'
        link.classList.add('active');  // Th√™m class active
        categories.forEach(c => c.classList.remove('hidden'));  // Hi·ªÉn th·ªã t·∫•t c·∫£ danh m·ª•c
      }
    });
  }

  const searchTermFromUrl = urlParams.get('search');  // L·∫•y tham s·ªë search t·ª´ URL
  if (searchTermFromUrl) {  // N·∫øu c√≥ tham s·ªë search
    searchInput.value = decodeURIComponent(searchTermFromUrl);  // ƒê·∫∑t gi√° tr·ªã input t·ª´ URL
    setTimeout(() => filterProducts(), 100);  // Delay 100ms r·ªìi g·ªçi h√†m l·ªçc ƒë·ªÉ tr√°nh xung ƒë·ªôt
  }

  if (categoryFromUrl && categoryFromUrl !== 'all') {  // N·∫øu c√≥ category v√† kh√¥ng ph·∫£i 'all'
    categoryLinks.forEach(link => {  // Duy·ªát qua li√™n k·∫øt
      if (link.dataset.category === categoryFromUrl) {  // T√¨m li√™n k·∫øt kh·ªõp
        link.click();  // K√≠ch ho·∫°t s·ª± ki·ªán click
      }
    });
  } else if (categoryFromUrl === 'all') {  // N·∫øu category l√† 'all'
    categoryLinks.forEach(link => {  // Duy·ªát qua li√™n k·∫øt
      if (link.dataset.category === 'all') {  // T√¨m li√™n k·∫øt 'all'
        link.click();  // K√≠ch ho·∫°t s·ª± ki·ªán
      }
    });
  }

  // C·∫≠p nh·∫≠t cart count
  function updateCartCount() {  // H√†m c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng s·∫£n ph·∫©m trong gi·ªè h√†ng
    const cart = JSON.parse(localStorage.getItem("cart")) || [];  // L·∫•y gi·ªè h√†ng t·ª´ localStorage
    const cartCountElement = document.getElementById("cart-count");  // L·∫•y ph·∫ßn t·ª≠ hi·ªÉn th·ªã s·ªë l∆∞·ª£ng
    if (cartCountElement) {  // N·∫øu ph·∫ßn t·ª≠ t·ªìn t·∫°i
      const total = cart.reduce((sum, item) => sum + (item.quantity || 1), 0);  // T√≠nh t·ªïng s·ªë l∆∞·ª£ng
      cartCountElement.textContent = total <= 5 ? total : '5+';  // C·∫≠p nh·∫≠t n·ªôi dung ph·∫ßn t·ª≠
    }
  }
  updateCartCount();  // G·ªçi h√†m ƒë·ªÉ c·∫≠p nh·∫≠t ngay
});

</script>




  <!-- Footer -->
  <footer>
    <p>¬© 2025 MyShop Dropship. Gi·ªØ to√†n b·ªô b·∫£n quy·ªÅn.</p>
  </footer>

</body>
</html>