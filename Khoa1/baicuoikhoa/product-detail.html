<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chi tiáº¿t sáº£n pháº©m</title>
  <link rel="stylesheet" href="product-detail.css">
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="container">
      <a href="index.html" class="logo">
        <img src="logo.png" alt="Logo">
        <span>MyShop Dropship</span>
      </a>
      <a href="products.html" class="back-btn">â¬… Quay láº¡i sáº£n pháº©m</a>
      <div class="dropdown">
        <button class="dropdown-btn">â‰¡ Danh má»¥c</button>
        <div class="dropdown-content">
          <a href="products.html?category=all">Táº¥t cáº£</a>
          <a href="products.html?category=technology">CÃ´ng nghá»‡</a>
          <a href="products.html?category=fashion">Thá»i trang</a>
          <a href="products.html?category=cosmetics">Má»¹ pháº©m</a>
        </div>
      </div>
      <div class="search-box">
        <input type="text" placeholder="TÃ¬m kiáº¿m sáº£n pháº©m..." id="search-input">
        <button id="search-btn">ğŸ”</button>
      </div>
      <a href="#top" class="scroll-top">â¬†</a>
      <a href="cart.html" class="cart-icon">ğŸ› <span id="cart-count">0</span></a>
    </div>
  </nav>

  <!-- Chi tiáº¿t sáº£n pháº©m -->
  <main>
    <div class="details" id="product-detail">
      <div class="product-image">
        <img src="" alt="">
      </div>

      <div class="product-info">
        <h2 class="product-title"></h2>

        <div class="price-section"></div>

        <div class="action-buttons">
          <a href="#" class="buy-now">
            <span class="buy-text">ğŸ›’ ThÃªm vÃ o giá» hÃ ng</span>
            <small class="delivery-info"></small>
          </a>

          <!-- NÃºt Nháº¯n tÆ° váº¥n ngay (thay tháº¿ nÃºt consult-now cÅ©) -->
          <a href="#" id="chat-btn" class="consult-now">
            ğŸ’¬ Nháº¯n tÆ° váº¥n ngay
            <small class="consult-info">Chat miá»…n phÃ­ 24/7</small>
          </a>
        </div>

        <div class="product-details">
          <h3>ThÃ´ng tin chung</h3>
          <p class="product-desc"></p>
        </div>
      </div>
    </div>
  </main>

  <!-- Modal Popup cho Nháº¯n TÆ° Váº¥n (áº¨n máº·c Ä‘á»‹nh) -->
<div id="chat-modal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h3>ğŸ’¬ Nháº¯n tin tÆ° váº¥n sáº£n pháº©m</h3>
    <p>ChÃºng tÃ´i sáº½ pháº£n há»“i nhanh chÃ³ng trong vÃ²ng 5 phÃºt!</p>
    <form id="chat-form">
      <label for="user-name">Há» tÃªn:</label>
      <input type="text" id="user-name" placeholder="Nháº­p há» tÃªn" required>
      
      <label for="user-email">Email/SÄT:</label>
      <input type="text" id="user-email" placeholder="Nháº­p email hoáº·c sá»‘ Ä‘iá»‡n thoáº¡i" required>
      
      <label for="message">Tin nháº¯n:</label>
      <textarea id="message" placeholder="Há»i vá» sáº£n pháº©m, giÃ¡ cáº£, hoáº·c tÆ° váº¥n..." rows="4" required></textarea>
      
      <button type="submit" class="submit-chat">Gá»­i tin nháº¯n</button>
    </form>
  </div>
</div>

  <!-- JS Ä‘iá»n dá»¯ liá»‡u sáº£n pháº©m (Äáº¦Y Äá»¦ HOÃ€N CHá»ˆNH - 24 sáº£n pháº©m) -->
  <script>
    // Dá»¯ liá»‡u sáº£n pháº©m Äáº¦Y Äá»¦ (24 sáº£n pháº©m)
    const products = {
      "1": {
        title: "Loa Divoom DitooPro",
        price: "300.000Ä‘",
        image: "https://hdradio.vn/upload/hinhanh/loa-di-dong/divoom/ditoopro/ditoopro-avt.jpg",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ KÃ­ch thÆ°á»›c 18.5 inch LED<br>
ğŸ”¹ Äá»™ phÃ¢n giáº£i chuáº©n HD<br>
ğŸ”¹ PhÃ¹ há»£p vÄƒn phÃ²ng, há»c táº­p<br>
ğŸ”¹ Thiáº¿t káº¿ gá»n, dá»… láº¯p Ä‘áº·t<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> VietTech`
      },
      "2": {
        title: "Elgato Stream Deck Neo",
        price: "450.000Ä‘",
        image: "https://imagedelivery.net/ZeGtsGSjuQe1P3UP_zk3fQ/d21c2f61-af72-4cc4-972b-e5a073db9c00/storedata",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ Thiáº¿t káº¿ chuyÃªn nghiá»‡p<br>
ğŸ”¹ Nhiá»u phÃ­m tÃ¹y chá»‰nh<br>
ğŸ”¹ Há»— trá»£ streamer vÃ  content creator<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> Elgato`
      },
      "3": {
        title: "Elgato Gaming Stream Deck XL",
        price: "500.000Ä‘",
        image: "https://imagedelivery.net/ZeGtsGSjuQe1P3UP_zk3fQ/3dd303f9-1bdf-47b9-7e17-c01658b9a800/storedata",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ 32 phÃ­m LCD<br>
ğŸ”¹ Dá»… dÃ ng tuá»³ chá»‰nh macro<br>
ğŸ”¹ Há»— trá»£ gaming vÃ  streaming<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> Elgato`
      },
      "4": {
        title: "GiÃ¡ Ä‘á»¡ mÃ n hÃ¬nh North Bayou F80",
        price: "250.000Ä‘",
        image: "https://anphat.com.vn/media/product/33286_gia_do_man_hinh_north_bayou_17_3.png",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ Cháº¥t liá»‡u thÃ©p bá»n<br>
ğŸ”¹ Táº£i trá»ng tá»‘i Ä‘a 15kg<br>
ğŸ”¹ Dá»… láº¯p Ä‘áº·t, xoay 360 Ä‘á»™<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> North Bayou`
      },
      "5": {
        title: "Tai nghe Lobel TWS F9-5",
        price: "300.000Ä‘",
        image: "https://salt.tikicdn.com/cache/750x750/ts/product/5e/ba/07/9a769c0db6544b5b62c3be3104c1a829.jpg.webp",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ Tai nghe True Wireless<br>
ğŸ”¹ Káº¿t ná»‘i Bluetooth 5.0<br>
ğŸ”¹ Pin 6 giá» liÃªn tá»¥c<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> Lobel`
      },
      "6": {
        title: "BÃ n phÃ­m cÆ¡ AULA F3261",
        price: "450.000Ä‘",
        image: "https://cdn2.cellphones.com.vn/insecure/rs:fill:0:358/q:90/plain/https://cellphones.com.vn/media/catalog/product/f/r/frame_516_5__1.png",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ BÃ n phÃ­m cÆ¡ RGB<br>
ğŸ”¹ Switch Blue báº¥m Ãªm<br>
ğŸ”¹ Thiáº¿t káº¿ gaming<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> AULA`
      },
      "7": {
        title: "Chuá»™t Mchose G3 Wireless",
        price: "500.000Ä‘",
        image: "https://bizweb.dktcdn.net/thumb/grande/100/534/572/products/screenshot-2024-12-18-114608.png?v=1755598260167",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ Chuá»™t khÃ´ng dÃ¢y<br>
ğŸ”¹ DPI 16000<br>
ğŸ”¹ Pin lÃ¢u dÃ i<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> Mchose`
      },
      "8": {
        title: "MÃ n hÃ¬nh HP V193B",
        price: "250.000Ä‘",
        image: "https://vietminh.vn/uploads/files/man-hp-v193b(1).jpg",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ KÃ­ch thÆ°á»›c 19 inch<br>
ğŸ”¹ Äá»™ phÃ¢n giáº£i Full HD<br>
ğŸ”¹ Táº¥m ná»n TN<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> HP`
      },
      "9": {
        title: "Son NhÃ£ - Sáº¯c MÃ u Thanh NhÃ£",
        price: "330.000Ä‘",
        image: "https://media.comem.vn/uploads/September2023/son-nha-sac-mau-thanh-nha-1_sp2x.webp",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ MÃ u sáº¯c nháº¹ nhÃ ng, tá»± nhiÃªn<br>
ğŸ”¹ Chá»‘ng khÃ´ mÃ´i<br>
ğŸ”¹ LÃªn mÃ u chuáº©n<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> NhÃ£ Cosmetics`
      },
      "10": {
        title: "Son YSL Rouge Pur Couture",
        price: "890.000Ä‘",
        image: "https://vilip.vn/wp-content/uploads/2023/09/Son-YSL-Rouge-Pur-Couture-01-Le-Rouge-%E2%80%93-Mau-Do-Tuoi-dd.jpg?v=1694339097",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ LÃªn mÃ u chuáº©n, bá»n lÃ¢u<br>
ğŸ”¹ Cháº¥t son má»m má»‹n<br>
ğŸ”¹ DÆ°á»¡ng mÃ´i tá»± nhiÃªn<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> YSL`
      },
      "11": {
        title: "Pháº¥n NÆ°á»›c YSL Glow-Pact B10",
        price: "2.500.000Ä‘",
        image: "https://cdn.vuahanghieu.com/unsafe/0x500/left/top/smart/filters:quality(90)/https://admin.vuahanghieu.com/upload/product/2025/07/phan-nuoc-yves-saint-laurent-beaute-touche-eclat-glow-pact-cushion-foundation-tone-b10-688836df227fb-29072025095007.jpg",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ Che phá»§ tá»‘t, lá»›p ná»n má»‹n<br>
ğŸ”¹ Chá»‘ng trÃ´i, lÃ¢u trÃ´i<br>
ğŸ”¹ PhÃ¹ há»£p má»i loáº¡i da<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> YSL`
      },
      "12": {
        title: "Charlotte Tilbury Gian LÃ´ng MÃ y",
        price: "686.660Ä‘",
        image: "https://is4.fwrdassets.com/images/p/fw/45/CTIL-WU151_V1.jpg",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ Bá»n mÃ u<br>
ğŸ”¹ Dá»… tÃ¡n, tá»± nhiÃªn<br>
ğŸ”¹ Chá»‘ng lem<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> Charlotte Tilbury`
      },
      "13": {
        title: "Cá»‘p Äá»±ng Trang Äiá»ƒm LED",
        price: "1.850.000Ä‘",
        image: "https://phukientrangdiem.com/thumb.php?src=https://phukientrangdiem.com/upload/public/cop-trang-diem/cop-dung-do-trang-diem-xach-tay-guong-den-led-mau-den-khung-nhom-phukientrangdiem.com-4.1.jpg&w=500&h=0&f=products&s=1",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ CÃ³ gÆ°Æ¡ng vÃ  Ä‘Ã¨n LED<br>
ğŸ”¹ Thiáº¿t káº¿ tiá»‡n lá»£i<br>
ğŸ”¹ Cháº¥t liá»‡u cao cáº¥p<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> PKD`
      },
      "14": {
        title: "Bá»™ Má»¹ HoÃ ng Cung Pháº©m Há»“ng 5in1",
        price: "450.000Ä‘",
        image: "https://pos.nvncdn.com/688d2d-180276/ps/20240814_eXAj2aRqx3.jpeg?v=1723647728",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ Bao gá»“m 5 sáº£n pháº©m<br>
ğŸ”¹ DÆ°á»¡ng áº©m vÃ  lÃ m sÃ¡ng da<br>
ğŸ”¹ PhÃ¹ há»£p má»i loáº¡i da<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> HoÃ ng Cung`
      },
      "15": {
        title: "Cá»‘p Äá»±ng Má»¹ Pháº©m VÃ¢n Ná»•i",
        price: "690.000Ä‘",
        image: "https://i.ebayimg.com/images/g/lzQAAOSwLcFjIEQ1/s-l1600.webp",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ VÃ¢n ná»•i chá»‘ng tráº§y<br>
ğŸ”¹ Cháº¥t liá»‡u cháº¯c cháº¯n<br>
ğŸ”¹ Thiáº¿t káº¿ sang trá»ng<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> PKD`
      },
      "16": {
        title: "Kem DÆ°á»¡ng áº¨m Ban ÄÃªm OLAY",
        price: "816.000Ä‘",
        image: "https://down-vn.img.susercontent.com/file/vn-11134207-7r98o-lvyfnpdrhejda9@resize_w900_nl.webp",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ DÆ°á»¡ng áº©m sÃ¢u<br>
ğŸ”¹ LÃ m má»m da, giáº£m náº¿p nhÄƒn<br>
ğŸ”¹ PhÃ¹ há»£p má»i loáº¡i da<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> OLAY`
      },
      "17": {
        title: "Ão thun xanh navy BSX653",
        price: "289.000Ä‘",
        image: "https://thoitrangbigsize.vn/wp-content/uploads/2021/10/BSX653D0.jpg",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ Cháº¥t liá»‡u cotton thoÃ¡ng mÃ¡t<br>
ğŸ”¹ Form rá»™ng, thoáº£i mÃ¡i<br>
ğŸ”¹ PhÃ¹ há»£p Ä‘i chÆ¡i, Ä‘i há»c<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> BigSize Fashion`
      },
      "18": {
        title: "Quáº§n Short Kaki Nam M-8XL",
        price: "380.000Ä‘",
        image: "https://thoitrangbigsize.vn/wp-content/uploads/2025/04/Den-9.jpg",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ Cháº¥t liá»‡u kaki bá»n<br>
ğŸ”¹ Size tá»« M Ä‘áº¿n 8XL<br>
ğŸ”¹ PhÃ¹ há»£p máº·c hÃ ng ngÃ y<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> BigSize Fashion`
      },
      "19": {
        title: "TÃºi Äeo Vai UN767",
        price: "2.394.000Ä‘",
        image: "https://nhatminhsports.vn/wp-content/uploads/2025/03/Tui-Deo-Vai-Shoulder-Pouch-UN767-White-01.jpg",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ Cháº¥t liá»‡u cao cáº¥p<br>
ğŸ”¹ NgÄƒn chá»©a rá»™ng, tiá»‡n lá»£i<br>
ğŸ”¹ DÃ¢y Ä‘eo Ãªm Ã¡i<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> UN Sports`
      },
      "20": {
        title: "GiÃ y Tommy Hilfiger Tráº¯ng",
        price: "2.995.000Ä‘",
        image: "https://bizweb.dktcdn.net/thumb/1024x1024/100/449/458/products/anh-ghep-logo-web-7-22b8e5b3-9199-4fb3-8959-9a731199c56b.png",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ Thiáº¿t káº¿ sang trá»ng<br>
ğŸ”¹ Cháº¥t liá»‡u da cao cáº¥p<br>
ğŸ”¹ Äáº¿ chá»‘ng trÆ°á»£t<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> Tommy Hilfiger`
      },
            "21": {
        title: "VÃ¡y Hoa Tiá»‡c TrÃ  Ná»¯",
        price: "631.398Ä‘",
        image: "https://down-vn.img.susercontent.com/file/sg-11134201-7rau8-ma9fc0o8vstub1@resize_w900_nl.webp",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ Cháº¥t liá»‡u váº£i má»m má»‹n<br>
ğŸ”¹ Há»a tiáº¿t hoa sang trá»ng<br>
ğŸ”¹ PhÃ¹ há»£p Ä‘i tiá»‡c<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> Fashion Queen`
      },
      "22": {
        title: "DÃ¢y Chuyá»n Swarovski Swan",
        price: "4.190.000Ä‘",
        image: "https://swavi.vn/wp-content/swift-ai/images/wp-content/uploads/2024/01/Day-Chuyen-Swarovski-Chinh-Hang-Dancing-Swan-necklace-Swan-Blue-Rhodium-plated-01-jpg.webp",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ ÄÃ­nh Ä‘Ã¡ Swarovski<br>
ğŸ”¹ Thiáº¿t káº¿ tinh xáº£o<br>
ğŸ”¹ Dá»… phá»‘i Ä‘á»“<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> Swarovski`
      },
      "23": {
        title: "MÅ© TaylorMade Newport",
        price: "900.000Ä‘",
        image: "https://nhatminhsports.vn/wp-content/uploads/2025/04/Taylor-Made-Metal-Eyelit-Hat-2024-Model-Adjustable-White.webp",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ Cháº¥t liá»‡u cao cáº¥p<br>
ğŸ”¹ Äiá»u chá»‰nh vá»«a váº·n<br>
ğŸ”¹ Kiá»ƒu dÃ¡ng nÄƒng Ä‘á»™ng<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> TaylorMade`
      },
      "24": {
        title: "Tháº¯t LÆ°ng MIB35-2M01",
        price: "780.000Ä‘",
        image: "https://bizweb.dktcdn.net/thumb/grande/100/059/374/products/anhdaidien-web-1500x1500.jpg?v=1656078752770",
        delivery: "Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng",
        consult: "Chat miá»…n phÃ­ 24/7",
        description: `ğŸ”¹ Cháº¥t liá»‡u da PU cao cáº¥p<br>
ğŸ”¹ KhÃ³a cháº¯c cháº¯n<br>
ğŸ”¹ PhÃ¹ há»£p vá»›i nhiá»u trang phá»¥c<br>
<strong>NhÃ  Sáº£n Xuáº¥t:</strong> MIB`
      }
    };  // Káº¿t thÃºc object products

    

      // Hiá»ƒn thá»‹ dá»¯ liá»‡u chi tiáº¿t sáº£n pháº©m dá»±a trÃªn ID tá»« URL
  const urlParams = new URLSearchParams(window.location.search);
  const productId = urlParams.get('id');
  let currentProduct = null;
  let isResellProduct = false;
  let resellId = null;

  if (productId && productId.startsWith('resell-')) {
    // Xá»­ lÃ½ sáº£n pháº©m resell tá»« localStorage (Sá»¬A: Find báº±ng item.id chÃ­nh xÃ¡c)
    isResellProduct = true;
    resellId = productId; // ID thá»±c táº¿: resell-${timestamp}
    const resellList = JSON.parse(localStorage.getItem("resellList")) || [];
    currentProduct = resellList.find(item => item.id === resellId);  // Sá»¬A: Find báº±ng ID, khÃ´ng dÃ¹ng index
    
    if (currentProduct) {
      // Load dá»¯ liá»‡u resell (giá»¯ nguyÃªn)
      document.querySelector('.product-title').innerText = currentProduct.name;
      document.querySelector('.price-section').innerText = currentProduct.price;
      document.querySelector('.product-image img').src = currentProduct.img || 'https://via.placeholder.com/400x400?text=No+Image';
      document.querySelector('.delivery-info').innerText = 'Giao táº­n nÆ¡i / Nháº­n táº¡i cá»­a hÃ ng'; // Placeholder
      document.querySelector('.consult-info').innerText = 'Chat miá»…n phÃ­ 24/7'; // Placeholder

      // Xá»­ lÃ½ desc vá»›i newline â†’ <br>, rá»“i thÃªm manufacturer (GIá»® NGUYÃŠN)
      let descHtml = (currentProduct.desc || 'KhÃ´ng cÃ³ mÃ´ táº£.').replace(/\n/g, '<br>');
      if (currentProduct.manufacturer) {
        descHtml += `<br><strong>NhÃ  Sáº£n Xuáº¥t:</strong> ${currentProduct.manufacturer}`;
      } else {
        descHtml += `<br><strong>NhÃ  Sáº£n Xuáº¥t:</strong> KhÃ´ng xÃ¡c Ä‘á»‹nh`;
      }
      document.querySelector('.product-desc').innerHTML = descHtml;
    } else {
      document.querySelector('#product-detail').innerHTML = "<p class='error-message'>Sáº£n pháº©m resell khÃ´ng tá»“n táº¡i!</p>";
    }
  } else if (products[productId]) {
    // Xá»­ lÃ½ sáº£n pháº©m gá»‘c (GIá»® NGUYÃŠN)
    currentProduct = products[productId];
    document.querySelector('.product-title').innerText = currentProduct.title;
    document.querySelector('.price-section').innerText = currentProduct.price;
    document.querySelector('.product-image img').src = currentProduct.image;
    document.querySelector('.delivery-info').innerText = currentProduct.delivery;
    document.querySelector('.consult-info').innerText = currentProduct.consult;
    document.querySelector('.product-desc').innerHTML = currentProduct.description;
  } else {
    document.querySelector('#product-detail').innerHTML = "<p class='error-message'>Sáº£n pháº©m khÃ´ng tá»“n táº¡i!</p>";
  }

  // Xá»¬ LÃ THANH TÃŒM KIáº¾M (GIá»® NGUYÃŠN)
  const searchInput = document.getElementById('search-input');
  const searchButton = document.getElementById('search-btn');

  function redirectToProductsWithSearch() {
    const searchTerm = searchInput.value.trim();
    if (searchTerm) {
      window.location.href = `products.html?search=${encodeURIComponent(searchTerm)}`;
    } else {
      window.location.href = 'products.html';
    }
  }

  searchButton.addEventListener('click', redirectToProductsWithSearch);
  searchInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      redirectToProductsWithSearch();
    }
  });

  // Cáº­p nháº­t sá»‘ lÆ°á»£ng giá» hÃ ng (GIá»® NGUYÃŠN, nhÆ°ng sá»­a count thÃ nh total quantity)
  function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    const cartCountElement = document.getElementById("cart-count");
    if (cartCountElement) {
      const total = cart.reduce((sum, item) => sum + (item.quantity || 1), 0);  // Sá»¬A: TÃ­nh total quantity
      cartCountElement.textContent = total <= 5 ? total : '5+';
    }
  }
  updateCartCount();

  // Xá»¬ LÃ NÃšT CHO Sáº¢N PHáº¨M RESell (Sá»¬A: Delete dÃ¹ng findIndex báº±ng ID, edit truyá»n ID thá»±c)
  document.addEventListener('DOMContentLoaded', () => {
    const buyNowBtn = document.querySelector('.buy-now');
    const consultNowBtn = document.querySelector('.consult-now');

    if (isResellProduct && currentProduct && buyNowBtn && consultNowBtn) {
  // Thay Ä‘á»•i nÃºt Ä‘áº§u thÃ nh "XÃ³a sáº£n pháº©m" (ná»n Ä‘á») - GIá»® NGUYÃŠN, dÃ¹ng class thay vÃ¬ style
  buyNowBtn.classList.remove('buy-now');
  buyNowBtn.classList.add('delete-btn');
  buyNowBtn.innerHTML = `
    <span class="buy-text">ğŸ—‘ XÃ³a sáº£n pháº©m</span>
    <small class="delivery-info">XÃ³a khá»i danh sÃ¡ch bÃ¡n láº¡i</small>
  `;
  consultNowBtn.classList.remove('consult-now');
  consultNowBtn.classList.add('edit-btn');
  consultNowBtn.innerHTML = `
    <span class="buy-text">âœ Chá»‰nh sá»­a sáº£n pháº©m</span>
    <small class="consult-info">Chá»‰nh sá»­a thÃ´ng tin</small>
  `;
  let descHtml = (currentProduct.desc || 'KhÃ´ng cÃ³ mÃ´ táº£.').replace(/\n/g, '<br>');
  if (currentProduct.manufacturer) {
    descHtml += `<br><strong>NhÃ  Sáº£n Xuáº¥t:</strong> ${currentProduct.manufacturer}`;
  } else {
    descHtml += `<br><strong>NhÃ  Sáº£n Xuáº¥t:</strong> KhÃ´ng xÃ¡c Ä‘á»‹nh`;
  }
  document.querySelector('.product-desc').innerHTML = descHtml;


      // Sá»± kiá»‡n xÃ³a sáº£n pháº©m (Sá»¬A: DÃ¹ng findIndex báº±ng resellId = productId)
      buyNowBtn.addEventListener('click', (e) => {
        e.preventDefault();
        if (confirm('Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a sáº£n pháº©m nÃ y khá»i danh sÃ¡ch bÃ¡n láº¡i?')) {
          const resellList = JSON.parse(localStorage.getItem("resellList")) || [];
          const resellIndex = resellList.findIndex(item => item.id === resellId);  // Sá»¬A: Find báº±ng ID
          if (resellIndex !== -1) {  // Kiá»ƒm tra !== -1 thay vÃ¬ >=0
            resellList.splice(resellIndex, 1); // XÃ³a theo index tÃ¬m Ä‘Æ°á»£c
            localStorage.setItem("resellList", JSON.stringify(resellList));
            alert('ÄÃ£ xÃ³a sáº£n pháº©m thÃ nh cÃ´ng!');
            window.location.href = 'products.html'; // Chuyá»ƒn vá» danh sÃ¡ch sáº£n pháº©m
          } else {
            alert('Lá»—i: KhÃ´ng tÃ¬m tháº¥y sáº£n pháº©m Ä‘á»ƒ xÃ³a!');
          }
        }
      });

      // Sá»± kiá»‡n chá»‰nh sá»­a sáº£n pháº©m (Sá»¬A: Truyá»n resellId = productId thá»±c táº¿)
      consultNowBtn.addEventListener('click', (e) => {
        e.preventDefault();
        window.location.href = `checkout.html?edit=${resellId}`;  // resellId = productId (resell-${timestamp})
      });
    } else if (!isResellProduct && currentProduct && buyNowBtn) {
      // Giá»¯ nguyÃªn sá»± kiá»‡n thÃªm vÃ o giá» cho sáº£n pháº©m gá»‘c (GIá»® NGUYÃŠN)
      buyNowBtn.addEventListener('click', (e) => {
        e.preventDefault();
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        const existingItem = cart.find(item => item.name === currentProduct.title);
        if (existingItem) {
          alert('Sáº£n pháº©m nÃ y Ä‘Ã£ cÃ³ trong giá» hÃ ng rá»“i! Báº¡n chá»‰ cÃ³ thá»ƒ thÃªm 1 láº§n.');
          return;
        }
        const newItem = {
          name: currentProduct.title,
          price: currentProduct.price,
          img: currentProduct.image,
          quantity: 1
        };
        cart.push(newItem);
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartCount();
        alert('ÄÃ£ thÃªm sáº£n pháº©m vÃ o giá» hÃ ng thÃ nh cÃ´ng!');
      }); 
    }
  });

  // Chá»©c nÄƒng Nháº¯n TÆ° Váº¥n Ngay (Chá»‰ cho sáº£n pháº©m gá»‘c)
document.addEventListener('DOMContentLoaded', () => {
  const chatBtn = document.getElementById('chat-btn');
  const modal = document.getElementById('chat-modal');
  const closeBtn = document.querySelector('.close');
  const chatForm = document.getElementById('chat-form');

  if (chatBtn && !isResellProduct) {  // Chá»‰ Ã¡p dá»¥ng náº¿u KHÃ”NG pháº£i resell
    // HÃ m pre-fill form tá»« thÃ´ng tin Ä‘Äƒng nháº­p
    function preFillForm() {
      const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
      if (isLoggedIn) {
        try {
          const currentUser = JSON.parse(localStorage.getItem("currentUser") || "{}");
          if (currentUser.fullname && currentUser.email) {
            document.getElementById('user-name').value = currentUser.fullname;
            document.getElementById('user-email').value = currentUser.email;
            console.log('ÄÃ£ tá»± Ä‘á»™ng Ä‘iá»n thÃ´ng tin tá»« tÃ i khoáº£n Ä‘Äƒng nháº­p:', currentUser.fullname);
            return true;  // ThÃ nh cÃ´ng
          }
        } catch (e) {
          console.error('Lá»—i parse currentUser:', e);
        }
      }
      // Náº¿u chÆ°a Ä‘Äƒng nháº­p hoáº·c lá»—i, Ä‘á»ƒ trá»‘ng vÃ  nháº¯c (tÃ¹y chá»n)
      // alert('Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ tá»± Ä‘á»™ng Ä‘iá»n há» tÃªn vÃ  email!');  // Uncomment náº¿u muá»‘n nháº¯c
      return false;
    }

    chatBtn.addEventListener('click', (e) => {
      e.preventDefault();
      modal.style.display = 'block';  // Má»Ÿ modal
      document.body.style.overflow = 'hidden';  // áº¨n scroll khi modal má»Ÿ
      
      // Pre-fill form ngay khi má»Ÿ modal
      preFillForm();
    });

    // ÄÃ³ng modal khi click X hoáº·c ngoÃ i modal
    closeBtn.addEventListener('click', () => {
      modal.style.display = 'none';
      document.body.style.overflow = 'auto';  // KhÃ´i phá»¥c scroll
      // Reset form khi Ä‘Ã³ng (tÃ¹y chá»n, Ä‘á»ƒ giá»¯ pre-fill láº§n sau)
      chatForm.reset();
    });

    window.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
        chatForm.reset();  // Reset khi Ä‘Ã³ng tá»« ngoÃ i
      }
    });

    // Xá»­ lÃ½ form gá»­i tin nháº¯n (mÃ´ phá»ng gá»­i - Sá»¬ Dá»¤NG GIÃ TRá»Š FORM ÄÃƒ PRE-FILL)
chatForm.addEventListener('submit', (e) => {
  e.preventDefault();
  const name = document.getElementById('user-name').value.trim();
  const contact = document.getElementById('user-email').value.trim();
  const msg = document.getElementById('message').value.trim();

  if (name && contact && msg) {  // Kiá»ƒm tra xem cÃ¡c biáº¿n name, contact, vÃ  msg (láº¥y tá»« giÃ¡ trá»‹ input form) cÃ³ giÃ¡ trá»‹ vÃ  khÃ´ng rá»—ng. Äiá»u nÃ y Ä‘áº£m báº£o ráº±ng ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin trÆ°á»›c khi xá»­ lÃ½.
    // THÃŠM CODE LÆ¯U VÃ€O LOCALSTORAGE NGAY ÄÃ‚Y (chá»‰ khi submit thÃ nh cÃ´ng)
    let chats = JSON.parse(localStorage.getItem('chats') || '[]');  // Láº¥y máº£ng 'chats' tá»« localStorage. Náº¿u khÃ´ng tá»“n táº¡i, sá»­ dá»¥ng '[]' (máº£ng rá»—ng) vÃ  JSON.parse() chuyá»ƒn chuá»—i JSON thÃ nh máº£ng.
    chats.push({  // ThÃªm má»™t Ä‘á»‘i tÆ°á»£ng má»›i vÃ o máº£ng chats.
      name: name,  // LÆ°u giÃ¡ trá»‹ há» tÃªn tá»« form.
      contact: contact,  // LÆ°u giÃ¡ trá»‹ email hoáº·c phÆ°Æ¡ng thá»©c liÃªn há»‡.
      msg: msg,  // LÆ°u ná»™i dung tin nháº¯n.
      timestamp: new Date().toISOString()  // Táº¡o vÃ  lÆ°u thá»i gian gá»­i tin nháº¯n dÆ°á»›i dáº¡ng chuá»—i ISO (vÃ­ dá»¥: "2023-10-01T12:00:00.000Z"), giÃºp theo dÃµi thá»i gian chÃ­nh xÃ¡c.
    });
    localStorage.setItem('chats', JSON.stringify(chats));  // LÆ°u máº£ng chats Ä‘Ã£ cáº­p nháº­t vÃ o localStorage dÆ°á»›i dáº¡ng chuá»—i JSON, Ä‘áº£m báº£o dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ lÃ¢u dÃ i.
    console.log('ÄÃ£ lÆ°u chat vÃ o localStorage:', chats[chats.length - 1]);  // Ghi log Ä‘á»ƒ debug: Hiá»ƒn thá»‹ chat má»›i nháº¥t trong máº£ng (chats[chats.length - 1] lÃ  pháº§n tá»­ cuá»‘i cÃ¹ng), giÃºp kiá»ƒm tra trong console browser.

    // MÃ´ phá»ng gá»­i: Alert xÃ¡c nháº­n (sá»­ dá»¥ng giÃ¡ trá»‹ Ä‘Ã£ Ä‘iá»n sáºµn hoáº·c chá»‰nh sá»­a)
    alert(`Cáº£m Æ¡n ${name}! Tin nháº¯n cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c gá»­i. ChÃºng tÃ´i sáº½ liÃªn há»‡ qua ${contact} trong 5 phÃºt.`);  // Hiá»ƒn thá»‹ há»™p thoáº¡i alert Ä‘á»ƒ xÃ¡c nháº­n vá»›i ngÆ°á»i dÃ¹ng, sá»­ dá»¥ng biáº¿n name vÃ  contact Ä‘á»ƒ cÃ¡ nhÃ¢n hÃ³a thÃ´ng bÃ¡o.

    // Reset form vÃ  Ä‘Ã³ng modal
    chatForm.reset();  // Reset táº¥t cáº£ cÃ¡c field trong form chatForm, xÃ³a giÃ¡ trá»‹ Ä‘Ã£ nháº­p Ä‘á»ƒ chuáº©n bá»‹ cho láº§n sá»­ dá»¥ng tiáº¿p theo.
    modal.style.display = 'none';  // áº¨n modal chat báº±ng cÃ¡ch Ä‘áº·t thuá»™c tÃ­nh display thÃ nh 'none', giÃºp Ä‘Ã³ng cá»­a sá»• chat.
    document.body.style.overflow = 'auto';  // KhÃ´i phá»¥c thanh cuá»™n cá»§a trang web, cho phÃ©p ngÆ°á»i dÃ¹ng cuá»™n trang bÃ¬nh thÆ°á»ng sau khi Ä‘Ã³ng modal (trÆ°á»›c Ä‘Ã³ cÃ³ thá»ƒ Ä‘Ã£ áº©n báº±ng 'hidden').

    // Log Ä‘á»ƒ debug (xÃ³a sau)
    console.log('Tin nháº¯n gá»­i:', { name, contact, msg });  // Ghi log Ä‘á»ƒ debug: Hiá»ƒn thá»‹ Ä‘á»‘i tÆ°á»£ng chá»©a thÃ´ng tin tin nháº¯n Ä‘Ã£ gá»­i, giÃºp kiá»ƒm tra trong console. Báº¡n cÃ³ thá»ƒ xÃ³a dÃ²ng nÃ y sau khi phÃ¡t triá»ƒn xong.
  } else {
    alert('Vui lÃ²ng Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin!');  // Náº¿u báº¥t ká»³ trÆ°á»ng nÃ o thiáº¿u, hiá»ƒn thá»‹ há»™p thoáº¡i alert Ä‘á»ƒ thÃ´ng bÃ¡o lá»—i, yÃªu cáº§u ngÆ°á»i dÃ¹ng Ä‘iá»n Ä‘áº§y Ä‘á»§.
  }
});  // Káº¿t thÃºc event listener cho chatForm.addEventListener('submit', ...), Ä‘Ã³ng khá»‘i hÃ m xá»­ lÃ½ submit form.
  }
});
</script>

  <!-- FOOTER (HoÃ n chá»‰nh) -->
  <footer class="footer">
    Â© 2025 MyShop Dropship. Giá»¯ toÃ n bá»™ báº£n quyá»n.
  </footer>

</body>
</html>
